name: Buf sync

# TODO run in PRs? in merges/pushes to main?
on:
  push:
  workflow_dispatch:

jobs:
  push:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: bufbuild/buf-setup-action@v1.23.1
        with:
          github_token: ${{ github.token }}
      - run: buf alpha repo sync -v --debug --timeout 0 --module proto:buf.build/buftest/buf-shadow-sync --create --create-visibility private
        # TODO: how do I auth?
